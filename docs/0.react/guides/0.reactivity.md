---
title: State Management
description: Learn how reactivity works with Unhead in React.
---

## How State Works

Unhead integrates with React's state management out of the box. You can use both `useState` and `useMemo` with the `useHead` hook:

```ts
import { useState, useMemo } from 'react'
import { useHead } from '@unhead/react'

function MyComponent() {
  const [pageData, setPageData] = useState({ 
    description: 'This is my page' 
  })
  const [title, setTitle] = useState('title')
  
  // Use memoization for complex objects
  const scriptConfig = useMemo(() => ({
    src: 'https://example.com/script.js',
    defer: true
  }), [])

  useHead({
    // Direct state usage
    title,
    // Callback for dynamic values
    meta: [{ 
      name: 'description', 
      content: () => pageData.description 
    }],
    // Memoized complex objects
    script: [scriptConfig]
  })

  return <div>My Page</div>
}
```

## Performance Tips

1. Use `useMemo` for complex objects to prevent unnecessary re-renders
2. Prefer direct state references over callbacks when possible
3. Split large head configurations into smaller, focused pieces

## Common Pitfalls

### Don't Call useHead in Effects

```ts
// Bad: Creates new entries on every effect run
useEffect(() => {
  useHead({
    title
  })
}, [title])

// Good: Direct state reference
useHead({
  title
})
```

### Don't Create New Objects Inline

```ts
// Bad: New object on every render
useHead({
  script: [{
    src: 'https://example.com/script.js',
    defer: true
  }]
})

// Good: Memoized object
const scriptConfig = useMemo(() => ({
  src: 'https://example.com/script.js',
  defer: true
}), [])

useHead({
  script: [scriptConfig]
})
```

## Learn More

- [React Official Docs on State Management](https://react.dev/learn/managing-state)
- [Understanding React Re-renders](https://www.joshwcomeau.com/react/why-react-re-renders/)
- [Performance Optimization in React](https://legacy.reactjs.org/docs/optimizing-performance.html)
